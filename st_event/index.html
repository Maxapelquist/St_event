<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Upplägg 1</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
            margin: 0;
            padding: 0;
        }

        header {
            background-color: #333;
            color: #fff;
            text-align: center;
            padding: 20px 0;
        }

        h1 {
            margin: 0;
        }

        main {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #fff;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .table-container {
            display: flex;
            justify-content: space-between;
        }

        table {
            width: 30%;
            border-collapse: collapse;
            margin: 20px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
        }

        table, th, td {
            border: 1px solid #ddd;
        }

        th {
            background-color: #333;
            color: #fff;
            text-align: center;
            font-size: 1.2em;
            font-weight: bold;
            padding: 10px;
        }

        th span {
            display: block;
        }

        td {
            padding: 10px;
            text-align: left;
        }

        .logo {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 20px;
        }

        .donation-text {
            text-align: center;
            margin: 20px;
            font-size: 1.2em;
            font-weight: bold;
        }

        .position {
            font-weight: bold;
        }
    </style>
</head>
<body>
    <header>
        <h1>Välkommen till Mitt Evenemang</h1>
    </header>
    <main>
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th colspan="3">
                            Herr
                        </th>
                    </tr>
                    <tr>
                        <th>Namn</th>
                        <th>Tid</th>
                    </tr>
                </thead>
                <tbody id="herr-body">
                    <!-- Data for Herr will be populated here -->
                </tbody>
            </table>
            <table>
                <thead>
                    <tr>
                        <th colspan="3">
                            Dam
                        </th>
                    </tr>
                    <tr>
                        <th>Namn</th>
                        <th>Tid</th>
                    </tr>
                </thead>
                <tbody id="dam-body">
                    <!-- Data for Dam will be populated here -->
                </tbody>
            </table>
            <table>
                <thead>
                    <tr>
                        <th colspan="3">
                            Ungdom
                        </th>
                    </tr>
                    <tr>
                        <th>Namn</th>
                        <th>Tid</th>
                    </tr>
                </thead>
                <tbody id="ungdom-body">
                    <!-- Data for Ungdom will be populated here -->
                </tbody>
            </table>
        </div>
        <div class="donation-text">
            Tillsammans har vi samlat in <span id="donation-amount-text">0</span> kr till Suicide Zero
        </div>
        <div class="logo">
            <img src="st_logo.png" alt="Suicide Zero Logo">
        </div>
    </main>
    <script src="https://apis.google.com/js/api.js"></script>
    <script>
        const apiKey = 'AIzaSyAA3_S2jNmaQtOk7MLdaQjmjtfdDjmjMJw'; // Replace with your Google API key
        const spreadsheetId = '1jO7hIqR3vITWpnqKK5d4puz_jQZhYqEr-YgT5R6hgHg'; // Replace with your Google Sheets document ID
        const sheetName = 'Sheet1'; // Replace with the name of your sheet
        const dataRange = 'A1:C100'; // Replace with the desired range

        function getDataFromGoogleSheets() {
            gapi.client.init({
                'apiKey': apiKey,
                'discoveryDocs': ["https://sheets.googleapis.com/$discovery/rest?version=v4"],
            }).then(() => {
                return gapi.client.sheets.spreadsheets.values.get({
                    spreadsheetId: spreadsheetId,
                    range: `${sheetName}!${dataRange}`,
                });
            }).then((response) => {
                const data = response.result.values;
                populateTable(data);
            }).catch(error => {
                console.error(error);
            });
        }

        function populateTable(data) {
            const categories = {
                'Herr': 'herr-body',
                'Dam': 'dam-body',
                'Ungdom': 'ungdom-body',
            };

            data.shift(); // Remove header row

            data.forEach(row => {
                const [name, time, category] = row;
                const tr = document.createElement('tr');
                const tdName = document.createElement('td');
                const tdTime = document.createElement('td');

                tdName.textContent = name;
                tdTime.textContent = time + ' sekunder';

                tr.appendChild(tdName);
                tr.appendChild(tdTime);

                const categoryBodyId = categories[category];
                const categoryBody = document.getElementById(categoryBodyId);

                if (categoryBody) {
                    categoryBody.appendChild(tr);
                } else {
                    console.error('Category body not found for category:', category, 'with ID:', categoryBodyId);
                    console.log('Data for the row:', row);
                }
            });

            const totalDonationAmount = data.length * 100;
            document.getElementById('donation-amount-text').textContent = totalDonationAmount;
        }

        gapi.load('client', getDataFromGoogleSheets);
    </script>
</body>
</html>
